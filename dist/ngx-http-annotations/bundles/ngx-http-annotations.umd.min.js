!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common/http"),require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-http-annotations",["exports","@angular/common/http","@angular/core"],t):t(e["ngx-http-annotations"]={},e.ng.common.http,e.ng.core)}(this,function(e,c,t){"use strict";function p(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,o=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(a=o.next()).done;)u.push(a.value)}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=o["return"])&&r.call(o)}finally{if(n)throw n.error}}return u}function n(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function r(r){var a=this;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.decorate.apply(a,n(["observe",r],e))}}function a(r){var a=this;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.decorate.apply(a,n(["path",r],e))}}function o(r){var a=this;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.decorate.apply(a,n(["body",r],e))}}function u(r){var a=this;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.decorate.apply(a,n(["query",r],e))}}function s(r){var a=this;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.decorate.apply(a,n(["headers",r],e))}}function i(r){var a=this;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.decorate.apply(a,n(["produces",r],e))}}var l="resources_metadata",d=function(){function d(){}return d.decorate=function(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];switch(r.length){case 1:var n=p(r,1)[0];d.constructMetadata.apply(this,[e,"class",t,n.prototype]);break;case 2:var o=p(r,2);n=o[0],o[1];d.constructMetadata.apply(this,[e,"props",t,n]);break;case 3:if("number"==typeof r[2]){var u=p(r,3),s=(n=u[0],u[1]),c=u[2];d.constructMetadata.apply(this,[e,"params",t,n,{keyName:s,index:c}]);break}var i=p(r,3);n=i[0],s=i[1],i[2];d.constructMetadata.apply(this,[e,"methods",t,n,{keyName:s}]);break;default:throw new Error("Decorators are not valid here!")}},d.constructMetadata=function(e,t,r,a,n){a[l]=a[l]||{},a[l][t]=a[l][t]||{};a[l];var o=a[l][t];switch(n&&n.keyName&&(o[n.keyName]=o[n.keyName]||{}),n&&null!=n.index&&(o[n.keyName][e]=o[n.keyName][e]||{}),t){case"class":case"props":o[e]=r;break;case"methods":o[n.keyName][e]=r;break;case"params":o[n.keyName][e][r||"default"]=n.index}a[l][t]=o},d.requestMethod=function(u){return function(n,o,e){e.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=d.collectUrl(n,o,e),a={body:d.collectBody(n,o,e),params:d.collectQueryParams(n,o,e),headers:d.collectHeaders(n,o,e),responseType:d.produce(n,o,e),observe:d.getObserve(n,o,e)};return d.http.request(u,r,a)}}},d.getObserve=function(e,t,r){return e[l].methods&&e[l].methods[t]?e[l].methods[t].observe:undefined},d.produce=function(e,t,r){return e[l].methods&&e[l].methods[t]?e[l].methods[t].produces:undefined},d.collectUrl=function(a,n,o){var e=a[l]&&a[l]["class"]?a[l]["class"].path:"",t=a[l].methods&&a[l].methods[n]?a[l].methods[n].path:"",r="/"===(""+e+t)[0],u=[e,t].filter(function(e){return e}).join("/").split("/").map(function(e){if(":"===e[0]){var t=e.substring(1),r=a[l].params&&a[l].params[n]&&a[l].params[n].path?a[l].params[n].path[t]:"";return o[r]}return e}).filter(function(e){return e}).join("/");if(!r){var s=p(u.split("/"));return s[0]+"//"+s.slice(1).join("/")}return"/"+u},d.collectBody=function(e,t,r){return e[l].params&&e[l].params[t]&&e[l].params[t].body?r[e[l].params[t].body["default"]]:undefined},d.collectQueryParams=function(e,t,a){if(!e[l].params||!e[l].params[t]||!e[l].params[t].query)return undefined;var r=new c.HttpParams,n=e[l].params[t].query["default"],o=e[l].params[t].query,u=n!=undefined?a[n]:Object.keys(o).reduce(function(e,t){return Object.assign(e,((r={})[t]=a[o[t]],r));var r},{});return Object.keys(u).forEach(function(t){var e=u[t];Array.isArray(e)||(e=[e]),e.forEach(function(e){return r=r.append(t,e)})}),r},d.collectHeaders=function(e,t,r){var a=e[l]["class"]?e[l]["class"].headers:{},n=e[l].methods&&e[l].methods[t]?e[l].methods[t].headers:{},o=Object.assign({},a,n),u=new c.HttpHeaders;for(var s in o)u.append(s,o[s]);return u},d.http=null,d}(),f=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[c.HttpClientModule],providers:[{provide:t.APP_INITIALIZER,useFactory:h,multi:!0,deps:[c.HttpClient]}]}]}],e}();function h(e){return function(){d.http=e}}var m=a,y=a,v=o(null),b=u(null),g=u,P=u(null),k=r,M=s,q=i,H=d.requestMethod("Get"),N=d.requestMethod("Post"),O=d.requestMethod("Put"),j=d.requestMethod("Delete"),x=d.requestMethod("Options"),E=d.requestMethod("Head"),T=d.requestMethod("Patch");e.Path=m,e.PathParam=y,e.Body=v,e.Query=b,e.QueryParam=g,e.QueryParams=P,e.Observe=k,e.Headers=M,e.Produces=q,e.GET=H,e.POST=N,e.PUT=O,e.DELETE=j,e.OPTIONS=x,e.HEAD=E,e.PATCH=T,e.HttpRestModule=f,e.onAppInit=h,e.observe=r,e.path=a,e.body=o,e.query=u,e.headers=s,e.produces=i,e.HttpRestUtils=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-http-annotations.umd.min.js.map